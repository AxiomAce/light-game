/* =================================================================== */
/* ==========================   Global   ============================= */
/* =================================================================== */

/*
 * 为页面主体和 body 设置基本样式，移除默认边距并隐藏滚动条。
 */
body {
    margin: 0;
    padding: 0;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
        "Helvetica Neue", Arial, sans-serif;
    overflow: hidden; /* 防止滚动条出现 */
    background-color: #ffffff;
    color: #000000;
}

/* =================================================================== */
/* ==========================   Canvas   ============================= */
/* =================================================================== */

/*
 * 定义主画布，使其占据整个视口并作为底层背景。
 */
#canvas-html {
    display: block;
    width: 100vw;
    height: 100vh;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 1;
}

/* =================================================================== */
/* ==========================   Console   ============================ */
/* =================================================================== */

/*
 * 控制台容器的整体样式，实现居中、黑色背景和圆角。
 */
#console-html {
    position: absolute;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: #000000;
    color: #ffffff;
    padding: 0;
    border-radius: 8px;
    z-index: 10;
    display: flex;
    gap: 0;
    align-items: center;
    -webkit-user-select: none; /* Safari */
    -ms-user-select: none; /* IE 10+ */
    user-select: none; /* Standard syntax */
}

/*
 * 在拖拽过程中，控制台变为半透明且不可交互。
 */
 #console-html.transparent {
    opacity: 0.4;
    pointer-events: none;
}

/*
 * 控制台内通用按钮的基本样式。
 */
.console-button {
    background-color: transparent;
    color: #ffffff;
    border: none;
    padding: 6px;
    border-radius: 0;
    cursor: pointer;
    white-space: nowrap;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: space-between;
    width: 72px;
    height: 72px;
    box-sizing: border-box;
    -webkit-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

/* 控制台按钮顶部的标题文本。 */
.console-button-title {
    font-size: 9px;
    text-align: center;
}

/* 控制台按钮底部的副标题，用于显示快捷键或下拉提示。 */
.console-button-subtitle {
    font-size: 9px;
    height: 1.1em; /* 为元素预留高度，防止内容变化时布局抖动 */
    text-align: center;
}

/* 控制台按钮中央图标的容器，用于垂直居中。 */
.console-button-icon-container {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
}

/* 控制台按钮图标的具体样式。 */
.console-button-icon {
    width: 28px;
    height: 28px;
    pointer-events: none; /* 防止图标成为鼠标事件的目标，从而避免被拖拽 */
}

/*
 * 控制台按钮的悬停效果。
 */
.console-button:hover {
    background-color: #333333;
}

/*
 * 控制台按钮被按下时的效果 (不包括下拉菜单的触发器)。
 */
.console-button:not(.dropdown-trigger):active {
    background-color: #007bff;
}

/*
 * 控制台按钮的闪烁动画。
 */
@keyframes button-flash {
    30% {
        background-color: #007bff;
    }
}

/*
 * 控制台按钮的闪烁效果。
 */
.console-button.flash {
    animation: button-flash 400ms ease-out;
}

/*
 * 禁用状态下的按钮和下拉菜单触发器样式。
 */
.dropdown-container.disabled .dropdown-trigger,
.console-button.disabled {
    background-color: transparent;
    color: #666666;
    cursor: not-allowed;
    pointer-events: none;
}

/* 禁用状态下，使按钮内的图标和文字颜色变浅。 */
.console-button.disabled .console-button-icon,
.dropdown-container.disabled .dropdown-trigger .console-button-icon {
    opacity: 0.4;
}
.console-button.disabled .console-button-title,
.dropdown-container.disabled .dropdown-trigger .console-button-title {
    color: #666666;
}
.console-button.disabled .console-button-subtitle {
    color: #555555;
}

/*
 * 覆盖禁用按钮的悬停效果，以防止视觉变化。
 */
.console-button.disabled:hover {
    background-color: transparent;
}

/*
 * 下拉菜单组件的容器。
 */
.dropdown-container {
    position: relative;
    display: inline-block;
}

/*
 * 下拉菜单的选项面板，默认隐藏。
 */
.dropdown-options {
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    background-color: #000000;
    padding: 0;
    border-radius: 0 0 6px 6px;
    z-index: 11;
    display: flex;
    flex-direction: row;
    gap: 0;
    visibility: hidden;
    opacity: 0;
    overflow: hidden;
}

/*
 * 为控制台的首个和末尾元素设置圆角，使其整体呈圆角矩形。
 */
#console-html > .console-button:first-child,
#console-html > .dropdown-container:first-child > .dropdown-trigger {
    border-radius: 6px 0 0 6px;
}
#console-html > .console-button:last-child,
#console-html > .dropdown-container:last-child > .dropdown-trigger {
    border-radius: 0 6px 6px 0;
}

/*
 * 鼠标悬停在下拉菜单容器上时，显示选项面板。
 */
.dropdown-container:hover .dropdown-options {
    visibility: visible;
    opacity: 1;
}

/*
 * 禁用状态下下拉菜单箭头的颜色。
 */
.dropdown-container.disabled .dropdown-trigger .console-button-subtitle {
    color: #666666;
}

/*
 * 确保禁用的下拉菜单在悬停时不会显示选项。
 */
.dropdown-container.disabled:hover .dropdown-options {
    visibility: hidden;
    opacity: 0;
}

/*
 * 为下拉菜单触发器添加向下的小箭头图标（的样式）。
 * 这个规则移除了旧实现，新实现直接在JS中写入'▼'。
 */
.dropdown-trigger::after {
    content: ""; /* 移除旧的实现 */
    display: none;
}

/*
 * 控制台内功能组之间的垂直分割线。
 */
.console-separator {
    width: 2px;
    align-self: stretch;
    background-color: #555555;
    margin: 0;
}

/* =================================================================== */
/* ==========================   Inspector   ========================== */
/* =================================================================== */

/*
 * 查看器面板的容器样式。
 * 它是一个悬浮在画布右上角的圆角面板。
 */
#inspector-html {
    position: absolute;
    top: 120px;
    right: 20px;
    width: 300px;
    max-height: calc(100vh - 100px); /* 80px from top, 20px from bottom */
    background-color: #f0f0f0;
    border: 1px solid #cccccc;
    border-radius: 6px;
    z-index: 5;
    padding: 20px;
    box-sizing: border-box;
    overflow-y: auto;
}

/*
 * 查看器内的标题样式。
 */
#inspector-html h3 {
    margin-top: 0;
    padding-bottom: 10px;
    border-bottom: 1px solid #cccccc;
}

/*
 * 查看器内信息块的通用边距。
 */
#inspector-html .info-block {
    margin-bottom: 20px;
}

/* 移除查看器中最后一个信息块的下边距以优化底部空间 */
#inspector-html .info-block:last-child {
    margin-bottom: 0;
}

/*
 * 查看器内信息块中的段落文本样式。
 */
#inspector-html .info-block p {
    margin: 5px 0;
    font-size: 14px;
    color: #333333;
    word-wrap: break-word;
}

.inspector-button {
    padding: 8px 10px;
    font-size: 14px;
    background-color: #e0e0e0;
    border: 1px solid #cccccc;
    border-radius: 4px;
    cursor: pointer;
    text-align: center;
}

.inspector-button:hover {
    background-color: #d4d4d4;
}

.inspector-input {
    width: 185px;
    padding: 8px 10px;
    font-size: 14px;
    background-color: #ffffff;
    border: 1px solid #cccccc;
    border-radius: 4px;
    box-sizing: border-box;
}

.inspector-input:focus {
    outline: none;
    border-color: #007bff;
    box-shadow: 0 0 0 1px #007bff;
}

/* =================================================================== */
/* ========================   Modal Overlay   ======================== */
/* =================================================================== */

#modal-overlay-html {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(255, 255, 255, 0.5);
    backdrop-filter: blur(5px);
    -webkit-backdrop-filter: blur(5px);
    z-index: 100;
    display: flex;
    justify-content: center;
    align-items: center;
    opacity: 1;
    /* transition: opacity 0.1s ease-in-out; */
}

#modal-overlay-html.hidden {
    opacity: 0;
    pointer-events: none;
}

.modal-content {
    background-color: #f0f0f0;
    padding: 20px;
    border-radius: 8px;
    border: 1px solid #cccccc;
    width: 500px;
    max-width: 90%;
    display: flex;
    flex-direction: column;
    gap: 15px;
    /* box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1); */
}

.modal-content h3 {
    margin-top: 0;
    margin-bottom: 0;
    padding-bottom: 10px;
    border-bottom: 1px solid #cccccc;
}

.modal-content p {
    margin: 0;
    font-size: 14px;
    color: #333333;
}

.modal-content textarea {
    width: 100%;
    min-height: 120px;
    font-family: monospace;
    padding: 10px;
    box-sizing: border-box;
    resize: vertical;
    border: 1px solid #cccccc;
    border-radius: 4px;
    background-color: #ffffff;
}

.modal-buttons {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 10px;
}

.modal-action-row {
    display: flex;
    align-items: center;
    /* margin-top: 10px; */
}

p.modal-message {
    height: 1.2em;
    font-size: 14px;
    color: #a83232;
    text-align: center;
    margin: 0;
}

.modal-action-row p.modal-message {
    text-align: left;
    margin-right: auto; /* Pushes the button to the right */
    padding-right: 15px; /* Adds space between message and button */
}
